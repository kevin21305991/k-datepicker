!function(){"use strict";var e=[,function(e,t,n){n.r(t);var i=n(2);t.default={on:function(e,t){if(!(0,i.isFunction)(t))return this;var n=this.__events__;return e.split(" ").forEach((function(e){n[e]||(n[e]=[]),n[e].push(t)})),this},off:function(e,t){var n=this.__events__;return e.split(" ").forEach((function(e){void 0===t?n[e]=[]:n[e]&&n[e].forEach((function(i,r){i===t&&n[e].splice(r,1)}))})),this},once:function(e,t){var n=this;if(!(0,i.isFunction)(t))return this;return this.on(e,(function i(){n.off(e,i);for(var r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];t.apply(n,l)}))},emit:function(){for(var e=this,t=this.__events__,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];var a=r[0],c=r.slice(1,r.length);return t[a]?(t[a].forEach((function(t){(0,i.isFunction)(t)&&t.apply(e,c)})),this):this}}},function(e,t,n){n.r(t),n.d(t,{createUid:function(){return v},error:function(){return g},getAllElements:function(){return d},getElement:function(){return u},getTransformX:function(){return p},getTransformY:function(){return h},htmlStringToDOM:function(){return b},insert:function(){return i},isElement:function(){return a},isElementExist:function(){return o},isFunction:function(){return s},isNodeList:function(){return c},isNumber:function(){return l},isString:function(){return r},jsonParse:function(){return y},toHTMLElement:function(){return f},warn:function(){return m}});var i={before:"beforebegin",after:"afterend",append:"beforeend",prepend:"afterbegin"},r=function(e){return"string"==typeof e&&""!==e},l=function(e){return"number"==typeof e&&!isNaN(e)},a=function(e){return e instanceof HTMLElement},c=function(e){return e instanceof NodeList},o=function(e){return null!==u(e)},s=function(e){return"function"==typeof e},u=function(e){return a(e)?e:document.querySelector(e)},d=function(e){return c(e)?e:document.querySelectorAll(e)},v=function(){return Math.random().toString(36).substr(2,9)},f=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes},y=function(e){try{JSON.parse(e)}catch(t){return e}return JSON.parse(e)},p=function(e){var t=getComputedStyle(e).transform,n=t.match(/^matrix3d\((.+)\)$/);return n?parseFloat(n[1].split(", ")[12]):(n=t.match(/^matrix\((.+)\)$/))?parseFloat(n[1].split(", ")[4]):0},h=function(e){var t=getComputedStyle(e).transform,n=t.match(/^matrix3d\((.+)\)$/);return n?parseFloat(n[1].split(", ")[13]):(n=t.match(/^matrix\((.+)\)$/))?parseFloat(n[1].split(", ")[5]):0},m=function(e,t){console.warn("[".concat(e," warn]: ").concat(t))},g=function(e,t){console.error("[".concat(e," error]: ").concat(t))},b=function(e){return(new DOMParser).parseFromString(e,"text/html").body.childNodes[0]}}],t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};!function(){n.r(i);var e=n(1),t=n(2);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,l,a,c=[],o=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=l.call(n)).done)&&(c.push(i.value),c.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw r}}return c}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(l=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(l,"string"),"symbol"===r(a)?a:String(a)),i)}var l,a}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function d(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function v(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}var f=new WeakSet,y=new WeakSet,p=new WeakSet,h=new WeakSet,m=new WeakSet,g=new WeakSet,b=new WeakSet,w=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,b),u(this,g),u(this,m),u(this,h),u(this,p),u(this,y),u(this,f),this.__storage__={element:t,options:n},d(this,f,S).call(this)}));function S(){var e=this.__storage__,n=e.element,i=e.options;if(!(0,t.isElementExist)(n)||(0,t.getAllElements)(n).length<=0)console.error("".concat(n," is not found !"));else{var r={monthPerView:1,inputStart:".date-start",inputEnd:".date-end",lang:"zh-TW"},a={init:null,oneWayChange:null,slideChange:null,confirm:null};if(this.selector=n,this.elements=(0,t.getAllElements)(n),this.options=Object.assign({},r,i),this.__events__=Object.assign({},a),this.options.on)for(var c=0,o=Object.entries(this.options.on);c<o.length;c++){var s=l(o[c],2),u=s[0],v=s[1];this.__events__[u]=[v]}d(this,y,L).call(this)}}function L(){var e=this,t=e.elements,n=e.options;t.forEach((function(t){t.setAttribute("month-per-view",n.monthPerView),t.setAttribute("view-date",v(new Date)),t.classList.add("k-datepicker-initialize"),d(e,p,E).call(e,t),e.emit("init")}))}function E(e){var n=this,i=kDatepickerLanguage[n.options.lang],r=i.clear,l=i.oneWay,a=i.confirm,c=i.week,o=parseInt(e.getAttribute("month-per-view"));var s='<div class="calendar-popup">\n      <div class="c-container">\n        <div class="c-header">\n          <ul class="c-options">\n            <li class="option-item reset-btn">\n              <div class="icon"></div>\n              <div class="text">'.concat(r,'</div>\n            </li>\n            <li class="option-item one-way">\n              <input type="checkbox" name="" id="one-way">\n              <div class="fake-checkbox"></div>\n              <label for="one-way">').concat(l,'</label>\n            </li>\n          </ul>\n        </div>\n        <div class="c-title">\n          <div class="item current-month"></div>\n          <div class="item next-month"></div>\n        </div>\n        <div class="c-body">\n          <div class="c-scroll-wrapper">\n            <div class="c-scroll-view">\n              ').concat(function(e){for(var t="",n=0;n<e+2;n++)t+='<div class="c-slide" style="transform: translate3d(0,0,0);">\n        <div class="c-table">\n          <ul class="c-weeks">\n            <li>'.concat(c[0],"</li>\n            <li>").concat(c[1],"</li>\n            <li>").concat(c[2],"</li>\n            <li>").concat(c[3],"</li>\n            <li>").concat(c[4]," </li>\n            <li>").concat(c[5],"</li>\n            <li>").concat(c[6],'</li>\n          </ul>\n          <ul class="c-days">\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n            <li><div class="day-cell"></div></li>\n          </ul>\n        </div>\n      </div>');return t}(o),'\n            </div>\n          </div>\n          <div class="c-navigation">\n            <div class="prev-btn"></div>\n            <div class="next-btn"></div>\n          </div>\n        </div>\n        <div class="c-footer">\n          <div class="confirm-btn disabled">').concat(a,"</div>\n        </div>\n      </div>\n    </div>"),u=(0,t.htmlStringToDOM)(s);e.append(u),d(n,m,q).call(n,e,e.getAttribute("view-date")),d(n,g,D).call(n,e)}function A(e){var t=new Date(e);t.setMonth(t.getMonth()-1);var n=new Date(e);n.setMonth(n.getMonth()+1);var i=new Date(e);return i.setMonth(i.getMonth()+2),[t,e,n,i]}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=this,i=e.querySelectorAll(".c-slide"),r=function(e){var t=new Date(e).getFullYear(),n=new Date(e).getMonth();return new Date(t,n,1).getDay()},l=function(e){var t=new Date(e).getFullYear(),n=new Date(e).getMonth()+1;return new Date(t,n,0).getDate()},a=kDatepickerLanguage[n.options.lang].month,c=d(n,h,A).call(n,t),o=e.querySelector(".c-title .current-month"),s=e.querySelector(".c-title .next-month"),u=new Date(t).getMonth(),v=new Date(new Date(t).setMonth(u+1)).getMonth(),f=new Date(new Date(t).setMonth(u+1)).getFullYear();o.textContent="".concat(a[u]," ").concat(new Date(t).getFullYear()),s.textContent="".concat(a[v]," ").concat(f);for(var y=0;y<i.length;y++)for(var p=1,m=i[y].querySelectorAll(".day-cell"),g=0;g<35;g++)if(m[g].removeAttribute("date"),g>=r(c[y]))if(p>l(c[y]))m[g].classList.add("empty");else{var b=new Date(c[y]).getFullYear(),w=String(new Date(c[y]).getMonth()+1).padStart(2,"0"),S=String(p).padStart(2,"0"),L="".concat(b,"-").concat(w,"-").concat(S);m[g].setAttribute("date",L),m[g].textContent=p,new Date(L)<new Date&&m[g].classList.add("disabled"),p++}else m[g].classList.add("empty")}function D(e){var n=this,i=e.querySelector(n.options.inputStart),r=e.querySelector(n.options.inputEnd),l=e.querySelector(".reset-btn"),c=e.querySelector(".one-way input"),o=e.querySelector(".c-navigation .prev-btn"),s=e.querySelector(".c-navigation .next-btn"),u=e.querySelector(".confirm-btn"),f=!0,y=0,p=[];function h(e){e.stopPropagation(),this.closest(n.selector).querySelector(".calendar-popup").style.display="block"}function m(i){if(f){var r,l=e.querySelector(".c-scroll-view"),a=e.querySelectorAll(".c-slide");switch(f=!1,r&&clearTimeout(r),i){case"prev":l.style.cssText="\n            transform: translate3d(calc(".concat((0,t.getTransformX)(l),"px + ").concat(100/n.options.monthPerView,"%),0,0);\n            transition: transform 200ms ease-out 0s;\n          "),a.forEach((function(e){e.style.cssText="transform: translateX(calc(".concat((0,t.getTransformX)(e),"px - 100%));")}));var c=new Date(e.getAttribute("view-date"));c.setMonth(c.getMonth()-1),d(n,b,k).call(n,e,c),e.setAttribute("view-date",v(c));break;case"next":l.style.cssText="\n            transform: translate3d(calc(".concat((0,t.getTransformX)(l),"px - ").concat(100/n.options.monthPerView,"%),0,0);\n            transition: transform 200ms ease-out 0s;\n          "),a.forEach((function(e){e.style.cssText="transform: translateX(calc(".concat((0,t.getTransformX)(e),"px + 100%));")}));var o=new Date(e.getAttribute("view-date"));o.setMonth(o.getMonth()+1),d(n,b,k).call(n,e,o),e.setAttribute("view-date",v(o))}var s=e.querySelectorAll(".day-cell");1===p.length?s.forEach((function(e){var t=new Date(e.getAttribute("date"));e.classList.remove("is-selected"),e.classList.remove("in-range"),v(t)===v(p[0])&&e.classList.add("is-selected")})):2===p.length&&s.forEach((function(e){var t=new Date(e.getAttribute("date"));e.classList.remove("is-selected"),e.classList.remove("in-range"),v(t)!==v(p[0])&&v(t)!==v(p[1])||e.classList.add("is-selected"),t>p[0]&&t<p[1]&&e.classList.add("in-range")})),r=setTimeout((function(){f=!0,n.emit("slideChange")}),200)}}function g(){document.querySelector(".calendar-popup").style.display="none"}i.addEventListener("click",h),r.addEventListener("click",h),l.addEventListener("click",(function(){var t=e.querySelectorAll(".day-cell:not(.empty)");i.querySelector("input").value="",i.querySelector("input").classList.remove("is-selected"),r.querySelector("input").value="",r.querySelector("input").classList.remove("is-selected"),u.classList.add("disabled"),p=[],t.forEach((function(e){e.classList.remove("is-selected"),e.classList.remove("in-range")}))}),!1),c.addEventListener("change",(function(){var t=this.checked,l=e.querySelectorAll(".day-cell:not(.empty)");if(t){var a=e.querySelector('.day-cell:not(.empty)[date="'.concat(r.querySelector("input").value,'"]'));l.forEach((function(e){return e.classList.remove("in-range")})),null==a||a.classList.remove("is-selected"),r.querySelector("input").value="",r.querySelector("input").classList.remove("is-selected"),p.splice(-1,1),""!==i.querySelector("input").value&&u.classList.remove("disabled"),y=0}else""!==i.querySelector("input").value&&(y=1),""===r.querySelector("input").value&&u.classList.add("disabled");n.emit("oneWayChange",t)}),!1),o.addEventListener("click",(function(e){e.stopPropagation(),m("prev")}),!1),s.addEventListener("click",(function(e){e.stopPropagation(),m("next")}),!1),u.addEventListener("click",(function(){if(!this.classList.contains("disabled")){g();var e=[];p[0]&&(e[0]=v(p[0])),p[1]&&(e[1]=v(p[1])),n.emit("confirm",e)}}),!1),e.addEventListener("click",(function(t){t.stopPropagation();var n,l=!1,o=e.querySelectorAll(".day-cell:not(.empty):not(.disabled)"),s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){o=!0,l=e},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw l}}}}(o);try{for(s.s();!(n=s.n()).done;){var d=n.value;if(d.contains(t.target)||t.target.closest(".day-cell")===d){l=!0;break}}}catch(e){s.e(e)}finally{s.f()}if(l){var v=t.target.closest(".day-cell");switch(y){case 0:o.forEach((function(e){e.classList.remove("is-selected"),e.classList.remove("in-range")})),v.classList.add("is-selected"),i.querySelector("input").classList.add("is-selected"),i.querySelector("input").value=v.getAttribute("date"),r.querySelector("input").classList.remove("is-selected"),r.querySelector("input").value="",u.classList.add("disabled"),(p=[]).push(new Date(v.getAttribute("date"))),c.checked?u.classList.remove("disabled"):y++;break;case 1:if(new Date(v.getAttribute("date"))<=p[0])return;v.classList.add("is-selected"),r.querySelector("input").classList.add("is-selected"),r.querySelector("input").value=v.getAttribute("date"),u.classList.remove("disabled"),p.push(new Date(v.getAttribute("date"))),o.forEach((function(e){var t=new Date(e.getAttribute("date"));t>p[0]&&t<p[1]&&e.classList.add("in-range")})),y=0}}}),!1),document.addEventListener("click",(function(){g()}),!1)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;e.querySelectorAll(".day-cell").forEach((function(e){e.textContent="",e.classList.remove("empty"),e.classList.remove("disabled")})),d(this,m,q).call(this,e,t)}Object.assign(w.prototype,e.default),window.KDatepicker=w,i.default=w}()}();
//# sourceMappingURL=k-datepicker-dist.js.map